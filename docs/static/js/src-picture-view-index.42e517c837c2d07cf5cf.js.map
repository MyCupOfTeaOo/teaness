{"version":3,"sources":["D:/zouwendi/01projectFiles/teaness/src/Img/index.tsx","D:/zouwendi/01projectFiles/teaness/src/Modal/index.tsx","D:/zouwendi/01projectFiles/teaness/src/PictureView/PictureModal.tsx","D:/zouwendi/01projectFiles/teaness/src/PictureView/index.tsx","D:/zouwendi/01projectFiles/teaness/src/PictureView/index.mdx","D:/zouwendi/01projectFiles/teaness/src/hooks/index.ts"],"names":["Img","props","useEffectState","src","backupSrc","setSrc","className","style","alt","onError","defaultProps","Modal","context","AModal","error","centered","success","confirm","warning","PictureModal","defaultZoom","defaultAngle","visible","onCancel","modalClassName","width","rest","useState","zoom","setZoom","angle","setAngle","plus","useCallback","prevZoom","minus","left","prevAngle","right","onScroll","wheelDelta","useEffect","document","addEventListener","removeEventListener","classnames","footer","padding","transform","size","ghost","shape","onClick","icon","PictureView","params","div","createElement","isCancel","render","Promise","resolve","setTimeout","destory","ReactDOM","unmountComponentAtNode","parentNode","removeChild","body","appendChild","layoutProps","MDXLayout","MDXContent","components","mdxType","__position","__code","__scope","this","Playground","Props","Button","__codesandbox","of","isMDXComponent","deps","state","setState"],"mappings":"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","file":"static/js/src-picture-view-index.7bd81bb7.js","sourcesContent":["import React from 'react';\nimport { useEffectState } from '../hooks/index';\n\nexport interface ImgProps {\n  /**\n   * 第一顺位图片\n   */\n  src?: string;\n  /**\n   * 备用图片 默认使用file.svg\n   */\n  backupSrc?: string;\n  alt?: string;\n  className?: string;\n  style?: React.CSSProperties;\n}\n\nconst Img: React.FC<ImgProps> = props => {\n  const [src, setSrc] = useEffectState(props.src || props.backupSrc, [\n    props.src,\n  ]);\n  return (\n    <img\n      className={props.className}\n      style={props.style}\n      alt={props.alt}\n      src={src}\n      onError={() => setSrc(props.backupSrc)}\n    />\n  );\n};\nImg.defaultProps = {\n  backupSrc:\n    'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCI+CiAgPHBhdGggZmlsbD0iI0Q5RDlEOSIgZD0iTTUzNCAzNTJWMTM2SDIzMnY3NTJoNTYwVjM5NEg1NzZhNDIgNDIgMCAwIDEtNDItNDJ6Ii8+CiAgPHBhdGggZD0iTTg1NC42IDI4OC42TDYzOS40IDczLjRjLTYtNi0xNC4xLTkuNC0yMi42LTkuNEgxOTJjLTE3LjcgMC0zMiAxNC4zLTMyIDMydjgzMmMwIDE3LjcgMTQuMyAzMiAzMiAzMmg2NDBjMTcuNyAwIDMyLTE0LjMgMzItMzJWMzExLjNjMC04LjUtMy40LTE2LjctOS40LTIyLjd6TTYwMiAxMzcuOEw3OTAuMiAzMjZINjAyVjEzNy44ek03OTIgODg4SDIzMlYxMzZoMzAydjIxNmE0MiA0MiAwIDAgMCA0MiA0MmgyMTZ2NDk0eiIvPgo8L3N2Zz4K',\n};\nexport default Img;\n","import { Modal as AModal } from 'antd';\nimport { ModalProps } from 'antd/lib/modal';\n\nclass Modal extends AModal {\n  constructor(props: ModalProps, context: {}) {\n    super(props, context);\n  }\n}\n\nModal.error = props => AModal.error({ centered: true, ...props });\nModal.success = props => AModal.success({ centered: true, ...props });\nModal.confirm = props => AModal.confirm({ centered: true, ...props });\nModal.warning = props => AModal.confirm({ centered: true, ...props });\nexport default Modal;\n","import React, { useState, useCallback, useEffect } from 'react';\nimport classnames from 'classnames';\nimport Draggable from 'react-draggable';\nimport { Button } from 'antd';\nimport Modal from '../Modal';\nimport Img, { ImgProps } from '../Img';\nimport './styles.scss';\n\nexport interface PictureModalProps extends ImgProps {\n  modalClassName?: string;\n  /**\n   * 默认放大倍数\n   */\n  defaultZoom?: number;\n  /**\n   * 默认旋转角度\n   */\n  defaultAngle?: number;\n  visible?: boolean;\n  onCancel?: () => void;\n  /**\n   * 默认宽度,一般不需要设置\n   */\n  width?: string | number;\n}\n\nconst PictureModal: React.FC<PictureModalProps> = props => {\n  const {\n    defaultZoom = 1,\n    defaultAngle = 0,\n    visible,\n    onCancel,\n    modalClassName,\n    className,\n    width,\n    style,\n    ...rest\n  } = props;\n  const [zoom, setZoom] = useState(defaultZoom);\n  const [angle, setAngle] = useState(defaultAngle);\n  const plus = useCallback(() => {\n    setZoom(prevZoom => prevZoom + 0.1);\n  }, []);\n  const minus = useCallback(() => {\n    setZoom(prevZoom => {\n      if (prevZoom > 0.2) return prevZoom - 0.1;\n      return prevZoom;\n    });\n  }, []);\n  const left = useCallback(() => {\n    setAngle(prevAngle => prevAngle - 90);\n  }, []);\n  const right = useCallback(() => {\n    setAngle(prevAngle => prevAngle + 90);\n  }, []);\n  const onScroll = useCallback(({ wheelDelta }) => {\n    if (wheelDelta > 0) plus();\n    if (wheelDelta < 0) minus();\n  }, []);\n\n  useEffect(() => {\n    document.addEventListener('mousewheel', onScroll);\n    return () => document.removeEventListener('mousewheel', onScroll);\n  }, []);\n  return (\n    <Modal\n      className={classnames(modalClassName, 'tea-picture-view-modal')}\n      visible={visible}\n      footer={null}\n      onCancel={onCancel}\n      width={width}\n    >\n      <div className=\"tea-picture-view-content\">\n        <Draggable>\n          <div style={{ padding: 2 }}>\n            <Img\n              className={classnames(className, 'tea-picture-view-img')}\n              style={{\n                transform: `scale(${zoom}) rotate(${angle}deg)`,\n                ...style,\n              }}\n              {...rest}\n            />\n          </div>\n        </Draggable>\n        <div className=\"tea-picture-view-btns\">\n          <Button\n            size=\"large\"\n            ghost\n            shape=\"circle\"\n            onClick={plus}\n            icon=\"plus\"\n          />\n          <Button\n            size=\"large\"\n            ghost\n            shape=\"circle\"\n            onClick={minus}\n            icon=\"minus\"\n          />\n          <Button\n            size=\"large\"\n            ghost\n            shape=\"circle\"\n            onClick={left}\n            icon=\"undo\"\n          />\n          <Button\n            size=\"large\"\n            ghost\n            shape=\"circle\"\n            onClick={right}\n            icon=\"redo\"\n          />\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nPictureModal.defaultProps = {\n  alt: '文件加载失败',\n  defaultZoom: 1,\n  defaultAngle: 0,\n  width: '100vw',\n  backupSrc:\n    'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTczMTI3MjM3NzUzIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwNzAgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjEyMDQiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjA4Ljk4NDM3NSIgaGVpZ2h0PSIyMDAiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTk4MS43ODMyNzMgMEg4NS4yMjQ3MjdDMzguMzUzNDU1IDAgMCAzNS4zNzQ1NDUgMCA4My4wODM2MzZ2ODQ0Ljg5MzA5MWMwIDQ3LjYxNiAzOC4zNTM0NTUgODYuNTc0NTQ1IDg1LjE3ODE4MiA4Ni41NzQ1NDZoOTAzLjYzMzQ1NGM0Ni45MTc4MTggMCA4MS43MzM4MTgtMzguOTU4NTQ1IDgxLjczMzgxOS04Ni41NzQ1NDZWODMuMDgzNjM2QzEwNzAuNTkyIDM1LjM3NDU0NSAxMDI4LjcwMTA5MSAwIDk4MS43ODMyNzMgMHpNMzM1LjgyNTQ1NSAxMzUuOTEyNzI3Yzc0LjE5MzQ1NSAwIDEzNC4zMzAxODIgNjAuOTc0NTQ1IDEzNC4zMzAxODEgMTM2LjI4NTA5MSAwIDc1LjE3MDkwOS02MC4xMzY3MjcgMTM2LjE5Mi0xMzQuMzMwMTgxIDEzNi4xOTItNzQuMjg2NTQ1IDAtMTM0LjUxNjM2NC02MS4wMjEwOTEtMTM0LjUxNjM2NC0xMzYuMTkyIDAtNzUuMjY0IDYwLjIyOTgxOC0xMzYuMjg1MDkxIDEzNC41MTYzNjQtMTM2LjI4NTA5MXogbS0xNjEuNTEyNzI4IDc0NS45Mzc0NTVhNDEuODkwOTA5IDQxLjg5MDkwOSAwIDAgMS0yNy42NDgtMTAuMzc5NjM3IDQzLjc1MjcyNyA0My43NTI3MjcgMCAwIDEtNC42NTQ1NDUtNjEuMDY3NjM2bDE5OC4wOTc0NTQtMjU1LjE2MjE4MmE0Mi4xMjM2MzYgNDIuMTIzNjM2IDAgMCAxIDU3LjcxNjM2NC02LjcwMjU0NWwxMTYuNTQ5ODE4IDEyOC4xMzk2MzYgMjg2LjkwNjE4Mi0zNTIuODE0NTQ1YzE0LjYxNTI3My0xOC43MTEyNzMgOTAuMjUxNjM2LTEwNi43NzUyNzMgMTM1Ljg2NjE4Mi02LjkzNTI3MyAwLjA5MzA5MS0wLjA5MzA5MSAwLjA5MzA5MSAxMTIuOTY1ODE4IDAuMjMyNzI3IDI0Ny43NjE0NTUgMC4wOTMwOTEgMTQwLjggMC4wOTMwOTEgMzE3LjA2NzYzNiAwLjA5MzA5MSAzMTcuMDY3NjM2LTEuMDI0LTAuMDkzMDkxLTc2Mi43NDAzNjQgMC4wOTMwOTEtNzYzLjExMjcyNyAwLjA5MzA5MXoiIHAtaWQ9IjEyMDUiIGRhdGEtc3BtLWFuY2hvci1pZD0iYTMxM3guNzc4MTA2OS4wLmkyIj48L3BhdGg+PC9zdmc+',\n};\nexport default PictureModal;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PictureModal, { PictureModalProps } from './PictureModal';\n\nexport { PictureModal };\n\nexport default function PictureView(params: PictureModalProps) {\n  const div = document.createElement('div');\n  let isCancel = false;\n  document.body.appendChild(div);\n  function onCancel() {\n    render({ ...params, onCancel, visible: false });\n    isCancel = true;\n    return new Promise(resolve =>\n      setTimeout(() => {\n        destory();\n        resolve();\n      }, 200),\n    );\n  }\n  function destory() {\n    if (!isCancel) {\n      const unmountResult = ReactDOM.unmountComponentAtNode(div);\n      if (unmountResult && div.parentNode) {\n        div.parentNode.removeChild(div);\n      }\n    } else {\n      onCancel();\n    }\n  }\n  function render(props: PictureModalProps) {\n    ReactDOM.render(<PictureModal {...props} />, div);\n  }\n  render({ ...params, onCancel, visible: true });\n  return {\n    render,\n    onCancel,\n    destory,\n  };\n}\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\n\n/* @jsx mdx */\nimport { Playground, Props } from 'docz';\nimport { Button } from 'antd';\nimport 'antd/dist/antd.css';\nimport PictureView from '.';\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h1 {...{\n      \"id\": \"pictureview图片\"\n    }}>{`PictureView(图片)`}</h1>\n    <p>{`展示图片`}</p>\n    <h2 {...{\n      \"id\": \"基本用法basic-usage\"\n    }}>{`基本用法(Basic usage)`}</h2>\n    <Playground __position={0} __code={'<Button\\n  onClick={() => {\\n    PictureView({ src: \\'/img.jpg\\' })\\n  }}\\n>\\n  打开图片\\n</Button>'} __scope={{\n      props: this ? this.props : props,\n      Playground,\n      Props,\n      Button,\n      PictureView\n    }} __codesandbox={`undefined`} mdxType=\"Playground\">\n  <Button onClick={() => {\n        PictureView({\n          src: '/img.jpg'\n        });\n      }} mdxType=\"Button\">\n    打开图片\n  </Button>\n    </Playground>\n    <h2 {...{\n      \"id\": \"属性properties\"\n    }}>{`属性(Properties)`}</h2>\n    <Props of={PictureView} mdxType=\"Props\" />\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;","import {\n  useState,\n  useEffect,\n  Dispatch,\n  SetStateAction,\n  DependencyList,\n} from 'react';\n\nexport function useEffectState<T>(\n  props: T | (() => T),\n  deps?: DependencyList,\n): [T, Dispatch<SetStateAction<T>>] {\n  const [state, setState] = useState(props);\n  useEffect(() => {\n    setState(props);\n  }, deps);\n  return [state, setState];\n}\n"],"sourceRoot":""}