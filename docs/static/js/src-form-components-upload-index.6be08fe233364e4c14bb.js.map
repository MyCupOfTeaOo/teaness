{"version":3,"sources":["D:/zouwendi/01projectFiles/teaness/src/Form/Components/Upload/index.mdx","D:/zouwendi/01projectFiles/teaness/src/Form/Components/Upload/context.ts","D:/zouwendi/01projectFiles/teaness/src/Form/Components/Upload/Registry.ts","D:/zouwendi/01projectFiles/teaness/src/Form/Components/Upload/decorator.tsx","D:/zouwendi/01projectFiles/teaness/src/Form/Components/Upload/index.tsx","D:/zouwendi/01projectFiles/teaness/src/Img/index.tsx","D:/zouwendi/01projectFiles/teaness/src/Modal/index.tsx","D:/zouwendi/01projectFiles/teaness/src/Spin/index.tsx","D:/zouwendi/01projectFiles/teaness/src/hooks/index.ts"],"names":["name","layoutProps","MDXLayout","MDXContent","components","props","mdxType","__position","__code","__scope","this","useContext","useMemo","Playground","Props","Button","Upload","UploadContext","Registry","__codesandbox","maxSize","max","multiple","listType","accept","Demo","create","uploadContext","upload","Promise","r","j","setTimeout","onClick","then","res","console","log","of","parentName","isMDXComponent","React","createContext","register","unregister","p","cancel","strokeColor","bind","options","errorBack","WrappedComponent","registry","Set","memo","useState","loadings","setLoadings","visible","setVisible","uploadingPromises","useCallback","ref","add","toUpload","Array","from","length","message","error","resolve","all","map","item","fileList","file","status","percent","prevLoadings","uid","resp","info","uniqueId","push","err","setFileList","prevFileList","target","find","f","reject","lodash","omit","reduce","prev","cur","concat","Modal","title","className","content","forEach","waitSearch","Object","keys","key","unset","onCancel","Provider","value","maskClosable","footer","Img","src","thumbUrl","url","handlePreview","onPreview","onDownLoad","window","open","onChange","onSelect","getInfoErrorback","g","getFileInfo","children","loading","rest","context","unmount","isLoading","handle","split","filter","join","isEmpty","undefined","size","first","slice","useEffect","oldFileList","uids","t","type","index","isArray","every","prevFile","temp","values","beforeUpload","child","icon","disabled","onDownload","defaultProps","style","display","alignItems","width","useEffectState","backupSrc","setSrc","alt","onError","ModalComponent","params","div","document","createElement","isCancel","onOk","args2","args","render","destory","ReactDOM","unmountComponentAtNode","parentNode","removeChild","body","appendChild","AModal","centered","success","confirm","warning","SquareSpin","classnames","TreblingCircle","SpinStretch","Dots","Circle","viewBox","cx","cy","deps","state","setState"],"mappings":"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","file":"static/js/src-form-components-upload-index.468a9a53.js","sourcesContent":["\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\n\n/* @jsx mdx */\nimport { useContext, useMemo } from 'react';\nimport { Playground, Props } from 'docz';\nimport { Button } from 'antd';\nimport 'antd/dist/antd.css';\nimport Upload, { UploadContext, Registry } from '.';\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\nconst Demo = makeShortcode(\"Demo\");\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h2 {...{\n      \"id\": \"基本用法basic-usage\"\n    }}>{`基本用法(Basic usage)`}</h2>\n    <p>{`这是一个手动上传的组件,需要先实现 upload 方法全局注册后才可以使用`}</p>\n    <h3 {...{\n      \"id\": \"最简单的上传需要直接上传可以实现-beforeupload-方法\"\n    }}>{`最简单的上传,需要直接上传可以实现 beforeUpload 方法`}</h3>\n    <p>{`继承了 antd upload 的所有属性`}</p>\n    <Playground __position={0} __code={'限制大小\\n<Upload maxSize={1} />\\n限制上传数量\\n<Upload max={1} multiple />\\n展示样式\\n<Upload listType=\\\"picture\\\" />\\n友好的文件提示\\n<Upload accept=\\\"image/*\\\" />'} __scope={{\n      props: this ? this.props : props,\n      useContext,\n      useMemo,\n      Playground,\n      Props,\n      Button,\n      Upload,\n      UploadContext,\n      Registry\n    }} __codesandbox={`undefined`} mdxType=\"Playground\">\n  限制大小\n  <Upload maxSize={1} mdxType=\"Upload\" />\n  限制上传数量\n  <Upload max={1} multiple mdxType=\"Upload\" />\n  展示样式\n  <Upload listType=\"picture\" mdxType=\"Upload\" />\n  友好的文件提示\n  <Upload accept=\"image/*\" mdxType=\"Upload\" />\n    </Playground>\n    <Playground __position={1} __code={'() => {\\n  const Demo = useMemo(\\n    () =>\\n      Upload.create()(() => {\\n        const uploadContext = useContext(UploadContext)\\n        Registry.upload = () => {\\n          return new Promise((r, j) => {\\n            setTimeout(() => j(false), 1000)\\n          })\\n        }\\n        return (\\n          <div>\\n            <Button\\n              onClick={() => {\\n                uploadContext\\n                  .upload()\\n                  .then(res => console.log(`上传成功 ${res}`))\\n              }}\\n            >\\n              手动上传到服务器\\n            </Button>\\n            <Upload listType=\\\"picture\\\" />\\n          </div>\\n        )\\n      }),\\n    [],\\n  )\\n  return <Demo />\\n}'} __scope={{\n      props: this ? this.props : props,\n      useContext,\n      useMemo,\n      Playground,\n      Props,\n      Button,\n      Upload,\n      UploadContext,\n      Registry\n    }} __codesandbox={`undefined`} mdxType=\"Playground\">\n  {() => {\n        const Demo = useMemo(() => Upload.create()(() => {\n          const uploadContext = useContext(UploadContext);\n\n          Registry.upload = () => {\n            return new Promise((r, j) => {\n              setTimeout(() => j(false), 1000);\n            });\n          };\n\n          return <div>\n      <Button onClick={() => {\n              uploadContext.upload().then(res => console.log(`上传成功 ${res}`));\n            }} mdxType=\"Button\">手动上传到服务器</Button>\n      <Upload listType=\"picture\" mdxType=\"Upload\" />\n    </div>;\n        }), []);\n        return <Demo mdxType=\"Demo\" />;\n      }}\n    </Playground>\n    <h2 {...{\n      \"id\": \"属性properties\"\n    }}>{`属性(Properties)`}</h2>\n    <h3 {...{\n      \"id\": \"upload\"\n    }}>{`Upload`}</h3>\n    <Props of={Upload} mdxType=\"Props\" />\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-ts\"\n      }}>{`interface UploadProps extends AntUploadProps {\n  /**\n   * 选择图片后触发\n   */\n  onSelect?: (info: UploadChangeParam) => void;\n  /**\n   * 获取信息失败后的回调\n   */\n  getInfoErrorback?: (uid: string, err: any) => void;\n  /**\n   * 获取信息的方法 一般会先从上下文获取,但是这个优先级更高\n   */\n  getFileInfo?: GetFileInfoType;\n  /**\n   * 加载信息时候展示的样式\n   */\n  loading?: React.ReactNode;\n  /**\n   * 文件最大size 单位KB\n   */\n  maxSize?: number;\n    /**\n   * 文件最大数量 单位个\n   */\n  max?: number;\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"create\"\n    }}>{`create`}</h3>\n    <Props of={Upload.create} mdxType=\"Props\" />\n    <h2 {...{\n      \"id\": \"全局配置\"\n    }}>{`全局配置`}</h2>\n    <p>{`可以通过 Upload 目录的 Registry 修改`}</p>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;","import React from 'react';\nimport { UploadContextType, CancellablePromise } from './typings';\n\nexport const UploadContext = React.createContext<UploadContextType>({\n  register: () => {},\n  unregister: () => {},\n  upload: () => {\n    const p = new Promise(() => {});\n    (p as CancellablePromise<boolean>).cancel = () => {};\n    return p as CancellablePromise<boolean>;\n  },\n});\n","import { UploadFile, onUpload, GetFileInfoType } from './typings';\n\nconst Registry: {\n  onDownLoad?: (file: UploadFile) => void;\n  onPreview?: (file: UploadFile) => void;\n  upload?: onUpload;\n  getFileInfo?: GetFileInfoType;\n} = {};\n\nexport default Registry;\n","import React, { useCallback, useMemo, useState } from 'react';\nimport lodash from 'lodash-es';\nimport { message, Progress } from 'antd';\nimport Modal from '../../../Modal';\nimport { UploadContext } from './context';\nimport {\n  UploadRefType,\n  CancellablePromise,\n  UploadFile,\n  onUpload,\n} from './typings';\nimport Registry from './Registry';\nimport './styles.scss';\nimport Img from '../../../Img';\n\nexport interface OptionsType {\n  errorBack?: (err: any) => void;\n  upload?: onUpload;\n}\n\nconst strokeColor = {\n  '0%': '#108ee9',\n  '100%': '#87d068',\n};\n\nexport const bind = (options: OptionsType = {}) => {\n  const { errorBack } = options;\n  return function<T>(WrappedComponent: React.ComponentType<T>) {\n    return (props: T) => {\n      const registry = useMemo<Set<UploadRefType>>(() => new Set(), []);\n      const memo = useMemo<{\n        [key: string]: string[];\n      }>(() => ({}), []);\n      const [loadings, setLoadings] = useState<{\n        [key: string]: UploadFile;\n      }>({});\n      const [visible, setVisible] = useState(false);\n      const uploadingPromises = useMemo<Set<CancellablePromise<any>>>(\n        () => new Set(),\n        [],\n      );\n\n      const register = useCallback((ref: UploadRefType) => {\n        registry.add(ref);\n      }, []);\n      const unregister = useCallback((ref: UploadRefType) => {\n        registry.delete(ref);\n      }, []);\n\n      const upload = useCallback(() => {\n        const toUpload = options.upload || Registry.upload;\n        const registryArray = Array.from(registry);\n        if (registryArray.length > 0) {\n          if (!toUpload) {\n            message.error('未找到上传方法');\n            const p = Promise.resolve(false);\n            (p as CancellablePromise<boolean>).cancel = () => {};\n            return p as CancellablePromise<boolean>;\n          }\n          const depth = Array.from(registry).map(item => {\n            if (item.fileList) {\n              return item.fileList.map(file => {\n                // 找到需要上传的 后面那个判断只是为了类型推导\n                if (!file.status && file.percent === 0 && toUpload) {\n                  setVisible(true);\n                  setLoadings(prevLoadings => {\n                    return {\n                      ...prevLoadings,\n                      [file.uid]: {\n                        ...file,\n                        status: 'uploading',\n                      },\n                    };\n                  });\n                  const resp = toUpload(file, percent => {\n                    setLoadings(prevLoadings => {\n                      return {\n                        ...prevLoadings,\n                        [file.uid]: {\n                          ...file,\n                          status: percent < 100 ? 'uploading' : 'done',\n                          percent,\n                        },\n                      };\n                    });\n                  });\n                  uploadingPromises.add(resp);\n\n                  resp\n                    .then(info => {\n                      if (!memo[item.uniqueId]) {\n                        memo[item.uniqueId] = [info.uid];\n                      } else {\n                        memo[item.uniqueId].push(info.uid);\n                      }\n                      uploadingPromises.delete(resp);\n                    })\n                    .catch(err => {\n                      // 上传失败的\n                      item.setFileList(prevFileList => {\n                        if (prevFileList) {\n                          const target = prevFileList.find(\n                            f => f.uid === file.uid,\n                          );\n                          if (target) target.status = 'error';\n                          return [...prevFileList];\n                        }\n                        return prevFileList;\n                      });\n                      if (errorBack) errorBack(err);\n                      else console.error(err);\n                      uploadingPromises.delete(resp);\n                      return Promise.reject(err);\n                    })\n                    .finally(() => {\n                      setLoadings(prevLoadings => {\n                        return lodash.omit(prevLoadings, file.uid);\n                      });\n                    });\n                  return resp;\n                }\n                return null;\n              });\n            }\n            return [];\n          });\n          const all = depth.reduce((prev, cur) => {\n            if (cur) return prev.concat(cur);\n            return prev;\n          }, []);\n          const p = Promise.all(all)\n            .then(() => true)\n            .catch(() => false)\n            .then(res => {\n              setVisible(false);\n              if (!res) {\n                Modal.error({\n                  title: '有文件上传失败',\n                  className: 'tea-upload-error-modal',\n                  content: (\n                    <ul className=\"tea-upload-error-list\">\n                      {Array.from(registry)\n                        .reduce<UploadFile[]>((prev, cur) => {\n                          if (cur.fileList) {\n                            cur.fileList.forEach(item => {\n                              if (item.status === 'error') {\n                                prev.push(item);\n                              }\n                            });\n                          }\n                          return prev;\n                        }, [])\n                        .map(item => (\n                          <li title={item.name}>{item.name}</li>\n                        ))}\n                    </ul>\n                  ),\n                });\n              }\n              return res;\n            })\n            .finally(() => {\n              const waitSearch = Array.from(registry);\n              Object.keys(memo).forEach(key => {\n                const target = waitSearch.find(item => item.uniqueId === key);\n                if (target && target.add) {\n                  target.add(memo[key]);\n                }\n                lodash.unset(memo, key);\n              });\n            });\n          (p as CancellablePromise<boolean>).cancel = () => {\n            all.forEach(item => {\n              if (item) item.cancel();\n            });\n          };\n          return p as CancellablePromise<boolean>;\n        } else {\n          const p = Promise.resolve(true);\n          (p as CancellablePromise<boolean>).cancel = () => {};\n          return p as CancellablePromise<boolean>;\n        }\n      }, []);\n      const onCancel = useCallback(() => {\n        setVisible(false);\n        Array.from(uploadingPromises).forEach(item => {\n          item.cancel();\n        });\n      }, []);\n      return (\n        <UploadContext.Provider value={{ register, unregister, upload }}>\n          <Modal\n            className=\"tea-upload-modal\"\n            maskClosable={false}\n            onCancel={onCancel}\n            footer={null}\n            visible={visible}\n          >\n            <ul className=\"tea-upload-modal-body\">\n              {Object.keys(loadings).map(key => (\n                <li key={key}>\n                  <Img\n                    className=\"tea-upload-modal-img\"\n                    src={loadings[key].thumbUrl || loadings[key].url}\n                  />\n                  <div className=\"tea-upload-modal-content\">\n                    <span className=\"tea-upload-modal-title\">\n                      {loadings[key].name}\n                    </span>\n                    <Progress\n                      strokeColor={strokeColor}\n                      percent={loadings[key].percent}\n                    />\n                  </div>\n                </li>\n              ))}\n            </ul>\n          </Modal>\n          <WrappedComponent {...props} />\n        </UploadContext.Provider>\n      );\n    };\n  };\n};\n","import React, {\n  useState,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n} from 'react';\nimport { Upload as AntUpload, Button, message } from 'antd';\nimport lodash from 'lodash-es';\nimport { UploadListType } from 'antd/lib/upload/interface';\nimport { Circle } from '../../../Spin';\nimport { UploadContext } from './context';\nimport {\n  UploadProps,\n  UploadFile,\n  UploadChangeParam,\n  UploadRefType,\n} from './typings';\nimport Registry from './Registry';\nimport { bind } from './decorator';\n\nexport function handlePreview(\n  file: UploadFile,\n  listType?: UploadListType,\n): void {\n  switch (listType) {\n    case 'picture':\n    case 'picture-card':\n      if (Registry.onPreview) Registry.onPreview(file);\n      break;\n    default:\n      if (Registry.onDownLoad) Registry.onDownLoad(file);\n      else if (file.url) window.open(file.url);\n  }\n}\n\nconst Upload: React.FC<UploadProps> & { create: typeof bind } = props => {\n  const {\n    value,\n    onChange,\n    onSelect,\n    getInfoErrorback,\n    getFileInfo: g,\n    children,\n    loading,\n    maxSize,\n    max,\n    ...rest\n  } = props;\n  const context = useContext(UploadContext);\n  const memo = useMemo(\n    () => ({\n      unmount: false,\n      uniqueId: lodash.uniqueId('upload'),\n    }),\n    [],\n  );\n  const [loadings, setLoadings] = useState<{ [key: string]: boolean }>({});\n  const isLoading = useMemo(() => Object.keys(loadings).length > 0, [loadings]);\n  const getFileInfo = useMemo(() => g || Registry.getFileInfo, [g]);\n  const [fileList, setFileList] = useState<UploadFile[]>();\n  const handle = useCallback(\n    (info: UploadChangeParam) => {\n      const target = info.fileList.find(item => item.uid === info.file.uid);\n      setFileList(prevFileList => {\n        // 已上传删除的可能会这样\n        if (!target) {\n          if (onChange && value && info.file.status === 'removed') {\n            const fl = value.split(',');\n            const r = fl.filter(item => item !== info.file.uid).join(',');\n            onChange(lodash.isEmpty(r) ? undefined : r);\n          }\n          if (prevFileList) return prevFileList.filter(item => item.uid !== info.file.uid);\n          else return undefined;\n        }\n\n        // 删除\n        if (target.status === 'removed') {\n          if (onChange && value) {\n            const fl = value.split(',');\n            const r = fl.filter(item => item !== info.file.uid).join(',');\n            onChange(lodash.isEmpty(r) ? undefined : r);\n          }\n          if (prevFileList) return prevFileList.filter(item => item.uid !== target.uid);\n          else return undefined;\n        }\n\n        if (maxSize) {\n          if (target.size / 1024 > maxSize) {\n            message.error(`文件最大只能上传${maxSize}KB`);\n            return prevFileList;\n          }\n        }\n        // 增加\n        if (prevFileList) {\n          if (max && prevFileList.length === max) {\n            // 多文件时可能会超过max\n\n            // 需要判断这一个是不是value的\n            const first = prevFileList[0];\n            if (value && onChange) {\n              const fl = value.split(',');\n              const r = fl.filter(item => item !== first.uid).join(',');\n              onChange(lodash.isEmpty(r) ? undefined : r);\n            }\n\n            return prevFileList.slice(1).concat([target]);\n          }\n          return prevFileList.concat([target]);\n        } else {\n          return [target];\n        }\n      });\n      if (onSelect) onSelect(info);\n    },\n    [onChange, value],\n  );\n\n  useEffect(() => {\n    let unmount = false;\n    const oldFileList: UploadFile[] = [];\n    if (value && getFileInfo) {\n      const uids = value.split(',');\n      const all = uids.map(uid => {\n        if (fileList) {\n          const target = fileList.find(file => file.uid === uid);\n          if (target) {\n            oldFileList.push(target);\n            const t = Promise.resolve({\n              size: target.size,\n              name: target.name,\n              type: target.type,\n              url: target.url,\n            }) as Promise<{\n              size: number;\n              name: string;\n              type: string;\n              url: string;\n            }> & {\n              cancel: () => void;\n            };\n            t.cancel = () => {};\n            return t;\n          }\n        }\n        setLoadings(prev => ({\n          ...prev,\n          [uid]: true,\n        }));\n        return getFileInfo(uid);\n      });\n      // 清空\n      setFileList(oldFileList);\n      all.forEach((resp, index) => {\n        const uid = uids[index];\n        resp\n          .then(item => {\n            if (unmount) return;\n            setFileList(prevFileList => {\n              if (Array.isArray(prevFileList)) {\n                if (prevFileList.every(prevFile => prevFile.uid !== uid)) {\n                  return prevFileList.concat([\n                    {\n                      uid,\n                      size: item.size,\n                      name: item.name,\n                      url: item.url,\n                      type: item.type,\n                      status: 'done',\n                    },\n                  ]);\n                } else {\n                  return prevFileList;\n                }\n              } else {\n                return [\n                  {\n                    uid,\n                    size: item.size,\n                    name: item.name,\n                    url: item.url,\n                    type: item.type,\n                    status: 'done',\n                  },\n                ];\n              }\n            });\n          })\n          .catch(err => {\n            if (unmount) return;\n            setFileList(prevFileList => {\n              if (Array.isArray(prevFileList)) {\n                return prevFileList.concat([\n                  {\n                    uid,\n                    name: '文件信息加载失败',\n                    size: 0,\n                    status: 'error',\n                    type: 'null',\n                  },\n                ]);\n              } else {\n                return [\n                  {\n                    uid,\n                    name: '文件信息加载失败',\n                    size: 0,\n                    status: 'error',\n                    type: 'null',\n                  },\n                ];\n              }\n            });\n            if (getInfoErrorback) getInfoErrorback(uid, err);\n            else console.error('文件信息加载失败', err);\n          })\n          .finally(() => {\n            if (!memo.unmount) setLoadings(prev => lodash.omit(prev, uid));\n          });\n      });\n      return () => {\n        unmount = true;\n        all.forEach(item => item.cancel());\n      };\n    }\n  }, [value]);\n  useEffect(() => {\n    return () => {\n      memo.unmount = true;\n    };\n  }, []);\n  useEffect(() => {\n    const temp: UploadRefType = {\n      uniqueId: memo.uniqueId,\n      fileList,\n      setFileList,\n      add: (values: string[]) => {\n        if (props.onChange && values.length > 0) {\n          if (value) {\n            props.onChange(`${value},${values.join(',')}`);\n          } else {\n            props.onChange(values.join(','));\n          }\n        }\n      },\n    };\n    if (context.register) {\n      context.register(temp);\n      return () => {\n        if (context.unregister) {\n          context.unregister(temp);\n        }\n      };\n    }\n  }, [context, fileList, setFileList, value]);\n  const beforeUpload = useCallback(() => false, []);\n  const child = useMemo(() => {\n    if (isLoading) return loading;\n    if (!max) {\n      return (\n        children || (\n          <Button icon=\"upload\" disabled={props.disabled}>\n            上传\n          </Button>\n        )\n      );\n    }\n    if (!fileList) {\n      return (\n        children || (\n          <Button icon=\"upload\" disabled={props.disabled}>\n            上传\n          </Button>\n        )\n      );\n    }\n    if (fileList.length < max) {\n      return (\n        children || (\n          <Button icon=\"upload\" disabled={props.disabled}>\n            上传\n          </Button>\n        )\n      );\n    }\n    return undefined;\n  }, [children, fileList, isLoading, loading, props.disabled]);\n  const onPreview = useCallback(file => handlePreview(file, props.listType), [\n    props.listType,\n  ]);\n  return (\n    <AntUpload\n      onPreview={onPreview}\n      onDownload={Registry.onDownLoad}\n      beforeUpload={beforeUpload}\n      fileList={fileList}\n      onChange={handle}\n      {...rest}\n    >\n      {child}\n    </AntUpload>\n  );\n};\n\nUpload.defaultProps = {\n  loading: (\n    <div style={{ display: 'flex', alignItems: 'center' }}>\n      <Circle style={{ width: 24 }} />\n      文件信息加载中...\n    </div>\n  ),\n};\n\nUpload.create = bind;\n\nexport { UploadContext, Registry };\nexport default Upload;\n","import React from 'react';\nimport { useEffectState } from '../hooks/index';\n\nexport interface ImgProps {\n  /**\n   * 第一顺位图片\n   */\n  src?: string;\n  /**\n   * 备用图片 默认使用file.svg\n   */\n  backupSrc?: string;\n  alt?: string;\n  className?: string;\n  style?: React.CSSProperties;\n}\n\nconst Img: React.FC<ImgProps> = props => {\n  const [src, setSrc] = useEffectState(props.src || props.backupSrc, [\n    props.src,\n  ]);\n  return (\n    <img\n      className={props.className}\n      style={props.style}\n      alt={props.alt}\n      src={src}\n      onError={() => setSrc(props.backupSrc)}\n    />\n  );\n};\nImg.defaultProps = {\n  backupSrc:\n    'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCI+CiAgPHBhdGggZmlsbD0iI0Q5RDlEOSIgZD0iTTUzNCAzNTJWMTM2SDIzMnY3NTJoNTYwVjM5NEg1NzZhNDIgNDIgMCAwIDEtNDItNDJ6Ii8+CiAgPHBhdGggZD0iTTg1NC42IDI4OC42TDYzOS40IDczLjRjLTYtNi0xNC4xLTkuNC0yMi42LTkuNEgxOTJjLTE3LjcgMC0zMiAxNC4zLTMyIDMydjgzMmMwIDE3LjcgMTQuMyAzMiAzMiAzMmg2NDBjMTcuNyAwIDMyLTE0LjMgMzItMzJWMzExLjNjMC04LjUtMy40LTE2LjctOS40LTIyLjd6TTYwMiAxMzcuOEw3OTAuMiAzMjZINjAyVjEzNy44ek03OTIgODg4SDIzMlYxMzZoMzAydjIxNmE0MiA0MiAwIDAgMCA0MiA0MmgyMTZ2NDk0eiIvPgo8L3N2Zz4K',\n};\nexport default Img;\n","import { Modal as AModal } from 'antd';\nimport { ModalProps } from 'antd/lib/modal';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\ninterface OpenBase {\n  visible?: boolean;\n  onCancel?: (...args: any[]) => void | Promise<any>;\n  onOk?: (...args: any[]) => void | Promise<any>;\n}\n\nexport function open<T extends OpenBase>(\n  ModalComponent: React.ComponentType<T>,\n  params: T,\n) {\n  const div = document.createElement('div');\n  let isCancel = false;\n  document.body.appendChild(div);\n  function onOk(...args2: any[]) {\n    if (params.onOk) params.onOk(args2);\n    onCancel();\n  }\n  function onCancel(...args: any[]) {\n    if (params.onCancel) params.onCancel(args);\n\n    render({ ...params, onCancel, onOk, visible: false });\n    isCancel = true;\n    return new Promise(resolve =>\n      setTimeout(() => {\n        destory();\n        resolve(true);\n      }, 200),\n    );\n  }\n  function destory() {\n    if (isCancel) {\n      const unmountResult = ReactDOM.unmountComponentAtNode(div);\n      if (unmountResult && div.parentNode) {\n        div.parentNode.removeChild(div);\n      }\n    } else {\n      onCancel();\n    }\n  }\n  function render(props: T) {\n    ReactDOM.render(<ModalComponent {...props} />, div);\n  }\n  render({ ...params, onCancel, onOk, visible: true });\n  return {\n    render,\n    onCancel,\n    destory,\n  };\n}\n\nclass Modal extends AModal {\n  static open = (props: ModalProps & { children?: React.ReactNode }) =>\n    open(Modal, props);\n\n  constructor(props: ModalProps, context: {}) {\n    super(props, context);\n  }\n}\n\nModal.error = props => AModal.error({ centered: true, ...props });\nModal.success = props => AModal.success({ centered: true, ...props });\nModal.confirm = props => AModal.confirm({ centered: true, ...props });\nModal.warning = props => AModal.warning({ centered: true, ...props });\n\nexport default Modal;\n","import React, { CSSProperties } from 'react';\nimport classnames from 'classnames';\nimport './index.scss';\n\nexport interface BaseSpinPorps {\n  className?: string;\n  style?: CSSProperties;\n}\n\nexport interface SpinProps extends BaseSpinPorps {\n  type: 'SquareSpin' | 'TreblingCircle' | 'SpinStretch' | 'Dots';\n}\n\nexport const SquareSpin: React.FC<BaseSpinPorps> = props => (\n  <div\n    style={props.style}\n    className={classnames('tea-spin-square', props.className)}\n  />\n);\n\nexport const TreblingCircle: React.FC<BaseSpinPorps> = props => (\n  <div\n    style={props.style}\n    className={classnames('tea-spin-treblingCircle', props.className)}\n  >\n    <div className=\"outer\" />\n    <div className=\"middle\" />\n    <div className=\"inner\" />\n  </div>\n);\n\nexport const SpinStretch: React.FC<BaseSpinPorps> = props => (\n  <div\n    style={props.style}\n    className={classnames('tea-spin-spinStretch', props.className)}\n  />\n);\nexport const Dots: React.FC<BaseSpinPorps> = props => (\n  <div\n    style={props.style}\n    className={classnames('tea-spin-dots', props.className)}\n  >\n    <div />\n    <div />\n    <div />\n    <div />\n    <div />\n    <div />\n    <div />\n    <div />\n    <div />\n  </div>\n);\n\nexport const Circle: React.FC<BaseSpinPorps> = props => (\n  <svg\n    viewBox=\"25 25 50 50\"\n    style={props.style}\n    className={classnames('tea-spin-circle', props.className)}\n  >\n    <circle cx=\"50\" cy=\"50\" r=\"20\" />\n  </svg>\n);\n","import {\n  useState,\n  useEffect,\n  Dispatch,\n  SetStateAction,\n  DependencyList,\n} from 'react';\n\nexport function useEffectState<T>(\n  props: T | (() => T),\n  deps?: DependencyList,\n): [T, Dispatch<SetStateAction<T>>] {\n  const [state, setState] = useState(props);\n  useEffect(() => {\n    setState(props);\n  }, deps);\n  return [state, setState];\n}\n"],"sourceRoot":""}