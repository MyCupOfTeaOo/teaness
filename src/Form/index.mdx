---
name: Form(表单)
route: /Form
menu: Form Component
---

import { Playground, Props } from 'docz';
import { useMemo, useState } from 'react';
import moment from 'moment';
import 'antd/dist/antd.css';
import { Radio, Icon, Button, Input, InputNumber, Switch, DatePicker as AntDatePicker } from 'antd';
import Select from './Components/Select';
import Upload, { UploadContext } from './Components/Upload';
import DatePicker from './Components/DatePicker';
import { useStore, useForm } from '.';

# Form(表单)

---

> 注 ant design 的 InputNumber 组件性能很差 用多了表单会卡

---

## hooks

### useStore

#### 属性(Properties)

```ts
1;
```

```ts
type FormConfigs<T = {}> = {
  [P in keyof T]: FormConfig<T[P], T>;
};

export interface FormConfig<U, T, C = any> {
  /**
   * 校验规则 建议观看 https://github.com/yiminghe/async-validator
   */
  rules?: Rules;
  /**
   * 默认值
   */
  defaultValue?: U | undefined;
}
```

#### 基本用法(Basic usage)

<Playground>
  {() => {
    const store = useStore({
      name: {
        rules: [{
          required: true,
          message: "名称必填"
        }]
      },
      gender: {
        defaultValue: true,
      },
      adult: {
        defaultValue: true,
      },
      startDate: {
        parse(value){
          return value ? value.format(DatePicker.day) : value;
        },
        format(value){
          console.log(value)
          if (value) return moment(value);
          return value;
        }
      },
      endDate: {
        parse(value){
          return value ? value.format(DatePicker.day) : value;
        },
        format(value){
          if (value) return moment(value);
          return value;
        }
      },
    });
    const { Form, Item} = useForm(store);
    console.log('reload')
    return (
      <Form>
        <Item text="名称" id="name">
          <Input onChange={(e) => console.log(e.target.value)}/>
        </Item>
        <Item id="gender">
          <Radio.Group>
            <Radio value>男</Radio>
            <Radio value={false}>女</Radio>
          </Radio.Group>
        </Item>
        是否成年
        <Item id="adult" valueName="checked">
          <Switch />
        </Item>
        <Item id={['startDate', 'endDate']}>
          <AntDatePicker.RangePicker />
        </Item>
        <Button onClick={() => { store.submit(data => console.log(data)) }}>提交</Button>
        <Button onClick={() => { store.reset() }}>重置</Button>
      </Form>
    );
  }}
</Playground>

如果使用 TypeScript 如下

```tsx
```

formStore 的 api 如下

```ts
```

### Form

#### 属性(Properties)

```ts
```

#### 基本用法

<Playground>{() => {}}</Playground>
