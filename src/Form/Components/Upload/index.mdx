---
name: Upload(上传)
route: /Upload
menu: Form Component
---

import { useContext, useMemo } from 'react';
import { Playground, Props } from 'docz';
import { Button } from 'antd';
import 'antd/dist/antd.css';

import Upload, { UploadContext, Registry } from '.';

## 基本用法(Basic usage)

这是一个手动上传的组件,需要先实现 upload 方法全局注册后才可以使用

### 最简单的上传,需要直接上传可以实现 beforeUpload 方法

继承了 antd upload 的所有属性

<Playground>
  <Upload />
  <Upload listType="picture" />
</Playground>

<Playground>
  {() => {
    const Demo = useMemo(() => Upload.create()(() => {
      const uploadContext = useContext(UploadContext);
      Registry.upload = () => {
        return new Promise((r,j) => {
        setTimeout(() => j(false),1000)
        })
      }

      return (
        <div>
          <Button onClick={() => {
              uploadContext.upload().then(res => console.log(`上传成功 ${res}`))
            }}>手动上传到服务器</Button>
          <Upload listType="picture" />
        </div>
      );
    }),[]);
    return <Demo />;

}}

</Playground>

## 全局配置

可以通过 Upload 目录的 Registry 修改

## 属性(Properties)

### Upload

<Props of={Upload} />

### create

<Props of={Upload.create} />
